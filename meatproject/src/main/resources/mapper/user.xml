<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
<mapper namespace="com.meatproject.dao.UserDAO">

	<select id="listMember" resultType="HashMap" parameterType="String">
		select
		tm.seq,
		tm.user_name,
		tm.user_point,
		CONCAT(tm.phone1, ' - ', tm.phone2, ' - ', tm.phone3) AS phone
		from meatdb.tb_shop ts
		inner join meatdb.tb_member tm
		on ts.seq = tm.shop_seq
		where ts.shop_id = #{id}
		order by ts.seq
	</select>
	
	<insert id="newMemberInsert" parameterType="map">
		insert into tb_member
		(
		shop_seq,
		phone1,
		phone2,
		phone3,
		user_name,
		user_point,
		inc_date,
		up_date
		)
		values
		(
		${sNum},
		#{userPhon1},
		#{userPhon2},
		#{userPhon3},
		#{userNm},
		#{userPoint},
		now(),
		now()
		)
	</insert>

</mapper>